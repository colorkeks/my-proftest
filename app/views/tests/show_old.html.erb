<% if @test.directory == false %>
<div class="row question-content">
<div class="page-header">
  <h2>Тест <%= link_to 'Редактировать', edit_test_path(@test), :class => 'btn btn-default btn-lg', :style => 'display: inline'%></h2>
</div>
<div class="row">
<div class="col-lg-12">
  <h3>
  <div class="col-sm-2">
    Заголовок:
  </div>
  <div class="col-sm-offset-2">
    <%= @test.title %>
  </div>

  <div class="col-sm-2">
    Описание:
  </div>
  <div class="col-sm-offset-2">
    <%= @test.description %>
  </div>
  </h3>
</div>
</div>


<div class="page-header">
  <h2>Задания</h2>
</div>
  <table class="table table-striped test-case">
    <thead>
    <tr>
      <th>text</th>
      <th>task_type</th>
      <th>point</th>
      <th style="min-width: 205px;"><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
    </thead>
    <tbody>
    <% @tasks.each do |task| %>
        <tr>
          <td><%= task.text.html_safe %></td>
          <td><%= task.task_type %></td>
          <td><%= task.point %></td>
          <td>
            <%= link_to t('.show', :default => t("helpers.links.show")),
                        task_path(task), :class => 'btn btn-default btn-md' %>
            <%= link_to t('.edit', :default => t("helpers.links.edit")),
                        edit_task_path(task), :class => 'btn btn-default btn-md' %>
            <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                        task_path(task),
                        :method => :delete,
                        :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                        :class => 'btn btn-md btn-danger' %>
          </td>
        </tr>
    <% end %>
    </tbody>
  </table>

<button type="button" class="btn btn-primary btn-md" data-toggle="modal" data-target="#myModal">
  Добавить задание
</button>
<%= link_to 'Назад', current_user, :class => 'btn btn-default'%>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Выберите тип задания:</h4>
      </div>
        <%= render partial: 'task_form' %>
    </div>
  </div>
</div>
</div>
<% else %>
    <div class="row question-content">
      <div class="page-header">
        <h2>Папка <%= link_to 'Редактировать', edit_test_path(@test), :class => 'btn btn-default btn-lg', :style => 'display: inline'%></h2>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <div class="col-lg-6">
          <h3>
            <div class="col-sm-4">
              Заголовок:
            </div>
            <div class="col-sm-offset-4">
              <%= @test.title %>
            </div>
          </h3>
          </div>
          <div class="col-lg-6">
          </div>
        </div>
      </div>

    <div class="page-header">
      <h2>Тесты</h2>
    </div>
    <table class="table table-striped test-case">
      <thead>
      <tr>
        <th>Название:</th>
        <th>Кол-во вопросов:</th>
        <th>Алгоритм</th>
        <th>Время:</th>
      </tr>
      </thead>
      <tbody>
    <% @test.children.where(:directory => false).each do |test| %>
        <tr>
          <td><%= link_to test.title, test_path(test.id) %></td>
            <td><%= test.tasks.count %></td>
          <td><%= test.algorithm %></td>
          <td><%= test.timer.strftime('%H:%M') if !test.timer.nil? %></td>
        </tr>
    <% end %>
      </tbody>
    </table>

    <div class="page-header">
      <h2>Папки</h2>
    </div>
    <table class="table table-striped test-case">
      <thead>
      <tr>
        <th>Название:</th>
        <th>Кол-во элементов в папке:</th>
      </tr>
      </thead>
      <tbody>
      <% @test.children.where(:directory => true).each do |test| %>
          <tr>
            <td><%= link_to test.title, test_path(test.id) %></td>
            <td><%= test.children.count%></td>
          </tr>
      <% end %>
      </tbody>
    </table>
    </div>
<% end %>