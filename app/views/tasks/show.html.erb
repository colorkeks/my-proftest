<div class="row question-content">
  <div class="col-sm-12">
    <div class="page-header">
      <h2>Задание №<%= @task.id %> : <%= @task.task_type %></h2>
      <h4>Кол-во баллов:  <%= @task.point %></h4>
    </div>
  </div>
  <div class="row">
    <% if @task.task_contents.detect { |i| i.file_content_content_type }.nil? %>
        <div class="col-lg-12">
          <p>
            <%= @task.text.html_safe %>
          </p>
        </div>
    <% else %>
        <% if @task.task_contents.count <= 1 %>
            <div class="col-lg-6">
              <div>
                <h4><%= @task.text.html_safe %></h4>
              </div>
            </div>
            <div class="col-lg-6" style="text-align: center">
              <% @task.task_contents.each do |content| %>
                  <% if content.file_content_content_type =~ %r(audio) %>
                      <div style="margin: 0 auto;"><%= audio_tag(content.file_content.url(:original), controls: true, style: 'margin-top:0;') %></div>
                  <% elsif content.file_content_content_type =~ %r(image) %>
                      <div style="margin: 0 auto;"><%= image_tag content.file_content.url(:small), alt: content.file_content.url(:medium), style: 'margin-top:0;' %></div>
                  <% elsif content.file_content_content_type =~ %r(video) %>
                      <div style="margin: 0 auto;"><%= video_tag(content.file_content.url(:original), size: '100%x100%', controls: true, autobuffer: true, style: 'margin:0;') %></div>
                  <% else %>
                  <% end %>
              <% end %>
            </div>
        <% else %>
            <div class="col-lg-12">
              <div style="text-align: center; width: 100%; min-height: 200px;">
                <h4><%= @task.text.html_safe %></h4>
              </div>
            </div>
            <div class="row">
              <% @task.task_contents.each do |content| %>
                  <div class="col-lg-4">
                    <% if content.file_content_content_type =~ %r(audio) %>
                        <div style=""><%= audio_tag(content.file_content.url(:original), controls: true, style: 'margin-top:0;') %></div>
                    <% elsif content.file_content_content_type =~ %r(image) %>
                        <div style=""><%= image_tag content.file_content.url(:small), alt: content.file_content.url(:medium), style: 'margin-top:0;' %></div>
                    <% elsif content.file_content_content_type =~ %r(video) %>
                        <div style=""><%= video_tag(content.file_content.url(:original), size: '100%x100%', controls: true, autobuffer: true, style: 'margin:0;') %></div>
                    <% end %>
                  </div>
              <% end %>
            </div>
        <% end %>
    <% end %>
  </div>
  <div class="col-sm-12">
    <h3><%= @task.hint.html_safe %></h3>
  </div>

      <div class="col-sm-12">
        <table class="table answer_table">
          <thead>
          </thead>
          <tbody>
          <% @task.answers.order('id ASC').each do |answer| %>
              <tr class="answer">
                <td style="width: 50px;"></td>
                <% if @task.task_type == 'Множественный выбор' %>
                    <td style="width: 20px;"><%= check_box_tag :correct %></td>
                    <td><%= answer.text %></td>
                <% elsif @task.task_type == 'Единичный выбор' %>
                    <td style="width: 20px;"><%= radio_button_tag :correct, nil %></td>
                    <td><%= answer.text %></td>
                <% elsif @task.task_type == 'Сопоставление' %>
                    <td>
                    <label class="text"><%= answer.text%></label>
                    <div class="pull-right select-answer">
                      <%= select_tag( 'associations[]',options_for_select(['Не выбрано']) + options_from_collection_for_select(@task.associations.shuffle, 'id', 'text'), :class => 'form-control association_select') %>
                    </div>
                    </td>
                <% else %>
                    <td><%= answer.text %></td>
                <% end %>
                <% if @task.task_type == 'Последовательность' %>
                    <td style="width: 50px; height: 50px; text-align: center; border: 1px solid black" class="sorter">
                      <span style="font-size: 20px;" class="glyphicon glyphicon-move"></span>
                    </td>
                <% end %>
              </tr>
          <% end %>
          </tbody>
        </table>
      </div>
  <%= link_to t('.back', :default => t("helpers.links.Назад")),
              test_path(@task.test_id), :class => 'btn btn-primary' %>
</div>

<script>
    row_index();
    upper_downer();
    disable_select();
</script>