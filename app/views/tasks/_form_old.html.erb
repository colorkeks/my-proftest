<%= simple_form_for @task, :html => {:class => 'form-horizontal'} do |f| %>
    <div class="row question-content">
      <div class="row">
        <div class="col-sm-12">
          <div class="page-header">
            <h2>Задание <%= params[:action] == 'edit' ? ('№' + @task.id.to_s) : ':' %>  <%= @type %></h2>
            <h4>Кол-во
              баллов:  <%= f.number_field :point, :style => 'width: 50px;', params[:action] == 'edit' ? nil : :value => 1 %></h4>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="col-sm-6">
            <% if params[:action] == 'edit' %>
                <%= f.text_area :text, :class => 'edit' %>
            <% else %>
                <%= f.text_area :text, :class => 'edit', :value => '<h3>Lorem ipsum dolor sit amet, consectetur adipiscing elit</h3>' %>
                <%= f.hidden_field :test_id, :value => @test_id %>
                <%= f.hidden_field :task_type, :value => @type %>
            <% end %>
          </div>

          <div class="col-sm-6">
            <h3 style="margin-top: 0;">Загрузка картинки, аудио или видео:</h3>
            <table class="table table-striped task_contents_table">
              <thead>
              <th style="width: 40px"></th>
              <th style="min-width: 280px">Название/Файл</th>
              <th>Тип</th>
              <th>Действия</th>
              </thead>
              <tbody>
              <%= f.fields_for :task_contents do |ff| %>
                  <%= render 'task_content_fields', :f => ff %>
              <% end %>
              </tbody>
            </table>
            <p><%= link_to_add_fields 'Добавить контент', f, :task_contents,'task_contents_table'%></p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <% if params[:action] == 'edit' %>
              <h3><%= f.text_area :hint, :class => 'edit_hint' %></h3>
          <% elsif @type == 'Последовательность' %>
              <%= f.text_area :hint, :class => 'edit_hint', :value => '<h2>Расставьте очередность:</h2>' %>
          <% elsif @type == 'Сопоставление'%>
              <%= f.text_area :hint, :class => 'edit_hint', :value => '<h2>Сопоставьте строки:</h2>' %>
          <% elsif @type == 'Открытый вопрос' %>
              <%= f.text_area :hint, :class => 'edit_hint', :value => '<h2>Введите пропущенное слово:</h2>' %>
          <% else %>
              <%= f.text_area :hint, :class => 'edit_hint', :value => '<h2>Выберите правильные(-ый) овет(-ы):</h2>' %>
          <% end %>
        </div>
      </div>
      <% if @type == 'Сопоставление' %>
          <div class="row">
            <div class="col-sm-6">
              <h3>Ответы:</h3>
              <table class="table answer_table">
                <thead>
                </thead>
                <tbody id="assoc_items">
                <%= f.fields_for :answers, (params[:action] == 'edit' ? @task.answers.order('id ASC') : nil) do |ff| %>
                    <%= render 'answer_fields', :f => ff %>
                <% end %>
                </tbody>
              </table>
              <p><%= link_to_add_fields 'Добавить вариант ответа', f, :answers,'answer_table'%></p>
            </div>
            <div class="col-sm-6">
              <h3>Сопоставления:</h3>
              <table class="table associate_table">
                <thead>
                </thead>
                <tbody id="items">
                <%= f.fields_for :associations, (params[:action] == 'edit' ? @task.associations.order('id ASC') : nil) do |ff| %>
                    <%= render 'association_fields', :f => ff %>
                <% end %>
                </tbody>
              </table>
              <p><%= link_to_add_fields 'Добавить ассоциацию', f, :associations,'associate_table' %></p>
            </div>
          </div>
      <% elsif @type == 'Последовательность' %>
          <div class="row">
            <div class="col-sm-6">
              <table class="table table-striped answer_table">
                <thead>
                </thead>
                <tbody id="items">
                <%= f.fields_for :answers, (params[:action] == 'edit' ? @task.answers.order('id ASC') : nil) do |ff| %>
                    <%= render 'answer_fields', :f => ff %>
                <% end %>
                </tbody>
              </table>
              <p><%= link_to_add_fields 'Добавить вариант ответа', f, :answers,'answer_table'%></p>
            </div>
          </div>
      <% else %>
          <div class="row">
            <div class="col-sm-6">
              <table class="table table-striped answer_table">
                <thead>
                </thead>
                <tbody>
                <%= f.fields_for :answers, (params[:action] == 'edit' ? @task.answers.order('id ASC') : nil) do |ff| %>
                    <%= render 'answer_fields', :f => ff %>
                <% end %>
                </tbody>
              </table>
              <p><%= link_to_add_fields 'Добавить вариант ответа', f, :answers,'answer_table'%></p>
            </div>
          </div>
      <% end %>

      <%= f.submit 'Сохранить', class: 'btn btn-primary' %>
      <%= link_to t('.back', :default => t("helpers.links.Назад")),
                  test_path(@test_id), :class => 'btn btn-default' %>
    </div>
<% end %>

<script>
    init_wysiwyg();
    init_nested_form();
    upper_downer();
    row_index();
</script>